# GCFramework for PHP
## Introduction
This a minimal framework that uses other frameworks like Laminas, twig and many others to solve some business problems in PHP.
Define Database layer like DataMappers that map to database table and database abstraction layer developed before PDO appears into market.

_This library are part of a business application and is in development stage for separate to independent library._

## Capabilities

* Application configuration layer
* Database support:
   * Abstration BD driver layer, for:
       * Firebird
       * Oracle
       * SQLAnywere
       * PostgreSQL
   * Entity Data model abstraction layer: DataMapper, Record and ResultSet.
     
* Data Store model abstraction layer using K-V stores (REDIS, MEMCACHED).
* Data export capabilities, can define DataReport to different output formats: XSL, JSON or PDF.
* Task abstraction layer to execute tasks to job server, actual version only supports Gearman.
* Cache integration to: REDIS, Memcached or File based.
* Web layer utilities:
    * Controllers classes
    * Template engine: Support multi template libraries, now supports twig and patTemplate.
    * Controllers for API REST implementations

Additionally incorporate drivers to connect to biometric terminal systems for ImesD Electrónica, supported models are:
* CP-5000 
* CP-6000

## Using library

This library is composer package and its available on packagist.org package repository. Can use from your current application or can create web application using this framework.

```
composer require phiconsultors/gcf
```

### Create GCF application

You need initialize composer project application and then execute composer require:

```
composer init
composer require phiconsultors/gcf
```

Now you need create basic application structure like this:

```
Myapp
│   composer.json
│   init.php
├───cfg
│   └───properties_dev.ini
├───app
├───data
│   └───models
└───frontal
    │   index.php
    │
    ├───cfg
    ├───modules
    ├───static
    │   ├───css
    │   ├───img
    │   └───jscript
    └───templates
            index.twig
```

On root that contains init.php to initialize application environment. In this example, only had simple index.php that initialize configuration envinronment and render simple TWIG template.

```php
<?php

/**
 * Application initialization
 */

use gcf\Environment;

include __DIR__."/vendor/autoload.php";

try {
        $env = Environment::getInstance("MyAppName");
} catch (Exception $ex) {
        die($ex->getMessage());
}
```

This file is included on main php (p.e: index.php) program that initialize GCF context.

And composer.json that contains project dependencies and general configuration. This file autogenerated with composer init

```json
{
    "name": "tomeu/myapp",
    "description": "Example application",
    "type": "project",
    "license": "GPL",
    "authors": [
        {
            "name": "Tomeu Capó",
            "email": "tomeucapo@gmail.com"
        }
    ],
    "minimum-stability": "stable",
    "require": {}
}
```
### Application configuration properties

You need configure application properties like database connection, cache, ... into cfg/properties_<env>.ini file:

```
; General configuration
[general]
;databases         = myappdb
;maindb            = myappdb
template_engines  = twigEngine

; Cache backend connection
[cache]
type=redis
host=127.0.0.1
port=6379
dbindex=1

; Datastore for DataStoreModel
[datastore]
dbindex=2

;Job server
[jobserver]
type=Gearman
host=127.0.0.1
port=4730

[paths]
path.templates = "templates/"
path.imatges = "static/img/"

[logging]
loggers=general
general.log.writerName = "Stream"
general.log.writerParams.stream =  "../logs/general.log"
general.log.filterName = "Priority"
general.log.filterParams.priority = 3
general.log.filterParams.operator = ">="

;[myappdb]
;database.type            = firebird
;database.auth            = user
;database.params.host     = localhost
;database.params.username = SYSDBA
;database.params.password = masterkey
;database.params.dbname   = myappdb.fdb
;database.params.path     =
```


